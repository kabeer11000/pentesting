import React from "react";
import { FaCamera } from "react-icons/fa";
import Modal from "react-bootstrap/Modal";

export class Screenshot extends React.Component {
  constructor() {
    super();
    this.state = {
      modalShow: false
    };

    this.setModalVisibility = this.setModalVisibility.bind(this);
  }

  setModalVisibility(state) {
    this.setState({ modalShow: state });
  }

  componentDidUpdate() {
    if (this.state.modalShow) {
      document.querySelector("#root").classList.add("blur");
    } else {
      document.querySelector("#root").classList.remove("blur");
    }
  }

  render() {
    if (!this.state.modalShow) {
      return (
        <div
          className="text-lg hover:bg-gray-500 p-1 rounded"
          onClick={() => this.setModalVisibility(true)}
        >
          <FaCamera />
        </div>
      );
    }
    return (
      <Modal
        size="md"
        aria-labelledby="contained-modal-title-vcenter"
        centered
        show={this.state.modalShow}
        onHide={() => this.setModalVisibility(false)}
      >
        <Modal.Header closeButton>
          <Modal.Title
            id="contained-modal-title-vcenter"
            className="text-lg tracking-wide"
          >
            {`Anonymous Feedback`}
          </Modal.Title>
        </Modal.Header>
        <Modal.Body className="py-4">
          <p>{this.props.message.m}</p>
        </Modal.Body>
        <Modal.Footer>
          Got this message on{"  "}
          <a href="/" style={{ color: "#007bff" }} className="ml-1">
            {" "}
            secret.cooo.me
          </a>
        </Modal.Footer>
      </Modal>
    );
  }
}
